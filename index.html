<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dialog system</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/tomorrow.min.css">
    <link href="css/ddl.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href="css/style.css" rel="stylesheet">

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">

      <div class="row">
        <div class="col-md-3">
          <ul id="main-menu" class="list-group">
            <a data-scroll href="#intro">
              <li class="list-group-item">Introduction</li>
            </a>
            <a data-scroll href="#demo">
              <li class="list-group-item">Demo and examples</li>
            </a>
            <a data-scroll href="#howto">
              <li class="list-group-item">How to use</li>
            </a>
            <li class="list-group-item">Conception</li>
            <a data-scroll href="#ddl">
              <li class="list-group-item">Dilog description language</li>
            </a>
            <li class="list-group-item">Architecture</li>
            <li class="list-group-item">Downloads</li>
            <li class="list-group-item">Documentation</li>
            <li class="list-group-item">Roadmap</li>
            <li class="list-group-item">Credits</li>
          </ul>
        </div>
        <div class="col-md-9">

          <div id="intro" class="row">
            <div class="col-md-12">
              <h1>Dialog systems <small>for robots</small></h1>
            </div>
          <!-- </div>

          <div class="row"> -->
            <div class="col-md-12">
              This project allows you to create natural interface for human-robot communications. 
            </div>
          </div>

          <div id="demo" class="row">
            <div class="col-md-12">
              <h2>Interactive demo <small id="update-status"></small></h2>
            </div>
            <div class="col-md-6">
              <p>You can chat with real dialog system online.</p>
              <p>Try to type something from the <a data-scroll href="#code_ddl">dialog description</a>.</p>
            </div>
            <div class="col-md-6">
              <div id="dialog-interface">
                <div class="panel panel-default">
                  <div class="panel-body">
                    <p id="dialog-log"></p>
                  </div>
                </div>
                <input id="phrase-input" type="text" class="form-control" placeholder="Type your phrase here" data-toggle="tooltip" data-placement="bottom" title="Press enter to send a message">
              </div>
            </div>
          <!-- </div>
          <div class="row"> -->
            <div class="col-md-12">
              <br>
              <p class="lead">Dialog above is described with this code</p>
            </div>

            <div class="col-md-9">
              <div role="tabpanel">

                <ul class="nav nav-tabs" role="tablist">
                  <li role="presentation"><a href="#code_python" aria-controls="code_python" role="tab" data-toggle="tab">Activity code</a></li>
                  <li role="presentation" class="active"><a href="#code_ddl" aria-controls="code_ddl" role="tab" data-toggle="tab">Dialog description</a></li>
                </ul>

                <!-- Tab panes -->
                <div class="tab-content">
                  <div role="tabpanel" class="tab-pane" id="code_python"><pre><div class="loading"><div><i class="fa fa-circle-o-notch fa-spin"></i></div></div></pre><p>&nbsp;</p></div>
                  <div role="tabpanel" class="tab-pane active" id="code_ddl"><pre><div class="loading"><div><i class="fa fa-circle-o-notch fa-spin"></i></div></div></pre><p>&nbsp;</p></div>
                </div>

              </div>
            </div>
            <div class="col-md-3">
              <br><br>
              <p>Activity section is regular Python 3 program. It defines robot activities.</p>
              <p><code>export = globals()</code> defines variable <i>export</i> to global scope.</p>
              <p>Than dialog manager imports this variable: <code>from main_slave import export</code></p>
              <p>After all variables and functions are available from the dialog description.</p>   
              <p>Dialog description section is special markup language, which defines phrases.</p>
            </div>

          </div>


          <div id="stats" class="row">
            <div class="col-md-12">
              <h2>Satistics</h2>
            </div><!-- 
            <div class="col-md-6">
              <p class="lead">Dialogs online</p>
            </div>
            <div class="col-md-6">
              <p class="lead">CPU activity</p>
            </div> -->
            <div class="col-md-12">
              <p class="lead">Similarity mistake threshold</p>
              <canvas id="chart-similarity" width="800"></canvas>
            </div><!-- 
            <div class="col-md-6">
              <p class="lead">Dialog states</p>
            </div> -->
          </div>

          <div id="howto" class="row">
            <div class="col-md-12">
              <h2>How to use</h2>
            </div>
            <div class="col-md-12">
              <p>There are two ways of linking dialog interpreter, activity code and dialog descriptions.</p>
            </div>
            <div class="col-md-6">
              <p class="lead">Activity code is master</p>
              <pre><code class="python">from dialog import Dialog

# your activities code here

if __name__ == "__main__":
    DLG = Dialog(globals())
    DLG.load("example.dlg") # ddl file
    DLG.interprete()</code></pre><pre><code class="plain">$ ./code.py</code></pre>
            </div>
            <div class="col-md-6">
              <p class="lead">Activity code is slave</p>
              <pre><code class="python"># your activities code here

export = globals()</code></pre><pre><code class="plain">$ ./interprete code.py desc.dlg</code></pre>
            </div>
            <div class="col-md-12">
              <p class="text-center">Anyway control flow is delegated to the dialog system.</p>
            </div>
          </div>

          <div id="ddl" class="row">
            <div class="col-md-12">
              <h2>Dialog description language <small>ddl</small></h2>
            </div>
            <div class="col-md-12">
              <p><code>*.dlg</code> files describes dialog model.</p>
            </div>
            <div class="col-md-12">
              <p class="lead">Tree structure</p>
              <p>Identation defines input or output of the dialog system.</p>
              <p>Default identation is 4 spaces. This can be configured. Always use one type of identations in whole file.</p>
            </div>
            <div class="col-md-6">
              <p>Here is an example:</p>
              <pre><code class="ddl"># this is a comment
# white-symbol lines ignored

# identation structure
Question
    Answer
        Question
            Answer

# few questions at the top level
Question1
    Answer1
Question2
    Answer2 

# both of these Questions triggers Answer
Question1
Question2
    Answer

# this question calls two Answers
Question
    Answer1
        ...
    Answer2
        ...

# Question calls Answer1 and Answer2
# ... is Answer2 child, Answer1 has no childs
Question
    Answer1 
    Answer2
        ...</code></pre>
            </div>
            <div class="col-md-6">
              <p>Take a look at these identation errors:</p>
<pre><code class="ddl"># identation error
Question
    Answer
            Question

# valid structure, but AnswerX is Question1 child
Question1
    Answer
        Question
            Answer
#Question2
    AnswerX
        Question</code></pre>
              <p>Answer isn't obligatory at the last level. <i class="text-muted">(Example: you would like to count, how much user speaks "thanx"; just put a setter inside final Question statement).</i></p>
            </div>

            <div class="col-md-12">
              <p class="lead">State flow and acceptable questions</p>
              <p>TODo</p>
            </div>

            <div class="col-md-12">
              <p class="lead">Inline data</p>
              <p><code>`variable_or_function_name`</code></p>
              <p>You can use variables and function defined in code before sharing the global scope. Or varaibles updated during the interpretation.</p>
            </div>
            <div class="col-md-6">
              <p>Python code, somewhere at the global scope:</p>
              <pre><code class="python">def btc_rate():
    rate_eur = get_url_request()
    return rate_eur

cpu_temp = 54</code></pre>
            </div>
            <div class="col-md-6">
              <p>Dialog code:</p>
              <pre><code class="ddl">What's the current bitcoin rate?
    It's `btc_rate` euros for one bitcoin

What is your CPU temperature?
    temperature is `cpu_temp` degrees
    unfortunately not below zero</code></pre>
            </div>

            <div class="col-md-12">
              <p class="lead">Fixed setters</p>
              <p><code>`variable_name:Python_literal`</code></p>
              <p>Can be used anywhere, sets if dialog going thru this phrase. Used in question-leve and answer-level.</p>
            </div>
            <div class="col-md-6">
              <p>Python code, somewhere at the global scope:</p>
              <pre><code class="python">def look_report():
    if not friendly:
        return "You look great, as always"
    else:
        return joke("look")</code></pre>
            </div>
            <div class="col-md-6">
              <p>Dialog code:</p>
              <pre><code class="ddl">You are annoying `friendly:False`
    Sorry

How i looks like?
    `look_report`</code></pre>
            </div>

            <div class="col-md-12">
              <p class="lead">Flexible setters</p>
              <p><code>`variable_name~Python_literal`</code></p>
              <p>Can be used anywhere??! <b>only at the question level</b>, sets if dialog going thru this phrase.</p>
              <p>Dialog manager uses Link Grammar parser for NLP.</p>
              <pre><code class="ddl">...
    What is your name?
        My name is `collocutor~Mark`
            Nice to meet you, `collocutor`</code></pre>
            </div>

            <div class="col-md-12">
              <p class="lead">Routine call</p>
              <p><code>`function_name?`</code></p>
              <p>Call is only element at the line at answer-level. Values are at question-level. Activity is at answer-level. ANswers are Python literal.</p>
              <p>This calls aren't locking proceess. They creates Queue, which processed at the same time as user input.</p>
            </div>
            <div class="col-md-5">
              <p>Python code, somewhere at the global scope:</p>
              <pre><code class="python">def make_coffee(responses):
    print("routine started")
    time.sleep(5)
    responses.put('no sugar')

def make_wo_sugar(responses):
    time.sleep(4)
    responses.put(True)</code></pre>
            </div>
            <div class="col-md-7">
              <p>Dialog code:</p>
              <pre><code class="ddl">make me a coffee
    okay, i'm going to make you a coffee
    `make_coffee?`
        'no water'
            Really.. it's a problem here
        'no sugar'
            Sorry, i haven't a sugar
                Make without sugar
                    Okay, i'll try
                    `make_wo_sugar?` 
                        True
                            Your coffee is ready
                    But i'm not sure
        'no water'
            There is no water</code></pre>
            </div>
            <div class="col-md-12">
              <p>Pay attention:</p>
              <pre><code class="ddl">`function_name`? # it will generate inline call and append ? to the end</code></pre>
            </div>
            <!-- <div class="col-md-6">
              <p>Here is an example:</p>
              <pre><code class="ddl"></code></pre>
            </div> -->
          </div>

          <div id="architecture" class="row">
            <div class="col-md-12">
              <h2>Architecture</h2>
            </div>
          </div>

          <div class="row" id="downloads">
            <div class="col-md-8">
              <img src="img/packages_Dialog.png" alt="" usemap="#modules" class="img-responsive"/>
              <map name="modules" id="modules">
                  <area alt="" title="" href="#1" shape="poly" coords="301,4,301,51,405,52,406,4" />
                  <area alt="" title="" href="#2" shape="poly" coords="317,101,317,149,389,149,389,100" />
                  <area alt="" title="" href="#3" shape="poly" coords="317,196,318,245,389,245,388,196" />
                  <area alt="" title="" href="#4" shape="poly" coords="27,293,27,340,99,340,99,293" />
                  <area alt="" title="" href="#5" shape="poly" coords="124,295,126,340,195,340,193,292" />
                  <area alt="" title="" href="#6" shape="poly" coords="222,294,222,340,293,341,293,292" />
                  <area alt="" title="" href="#7" shape="poly" coords="318,293,317,339,389,341,389,293" />
                  <area alt="" title="" href="#8" shape="poly" coords="98,389,98,436,169,436,168,387" />
                  <area alt="" title="" href="docs/main_master.html" shape="poly" coords="74,485,74,533,194,533,192,485" />
                  <area alt="" title="" href="#10" shape="poly" coords="246,485,248,532,319,532,318,484" />
                  <area alt="" title="" href="docs/main_slave.html" shape="poly" coords="345,388,346,437,451,436,451,388" />
              </map>
            </div>
            <div class="col-md-4">
              <p>This map represents modules of the dialog system.</p>
              <p>Each arrow represent import of the module.</p>
              <p>You can click at any module to read documented sources.</p>
            </div>
            <div class="col-md-12">
              <p class="lead">Classes diagram</p>
              <img class="img-responsive" src="img/classes_Dialog.png"/>
            </div>
          </div>
        </div>
      </div>

    </div>

    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script src="js/highlight.js"></script>
    <script src="js/python.js"></script>
    <script src="js/ddl.js"></script>
    <script src="js/smooth-scroll.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js"></script>
    <script src="js/script.js"></script>
  </body>
</html>